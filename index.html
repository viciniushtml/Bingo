<script>
    let isDarkMode = document.body.classList.contains("light-mode") ? false : true;

    // Garantir que tudo seja estilizado corretamente no carregamento
    document.addEventListener("DOMContentLoaded", () => {
        applyModeStyles();
    });

    function toggleDarkMode() {
        isDarkMode = !isDarkMode;
        document.body.classList.toggle("light-mode", !isDarkMode);
        applyModeStyles();
    }

    function applyModeStyles() {
        // Ajustar a cor de fundo e texto do body
        document.body.style.backgroundColor = isDarkMode ? '#2c2c2c' : '#fff';
        document.body.style.color = isDarkMode ? '#ffffff' : '#000000';

        // Ajustar cores dos inputs
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
            input.style.backgroundColor = isDarkMode ? '#444' : '#f39c12';
            input.style.color = isDarkMode ? '#fff' : '#2c3e50';
        });

        // Ajustar cores das tiles
        const tiles = document.querySelectorAll('.bingo-container > div');
        tiles.forEach(tile => {
            if (tile.classList.contains("marked")) {
                tile.style.backgroundColor = isDarkMode ? "#e74c3c" : "#e74c3c";
                tile.style.color = isDarkMode ? "#fff" : "#fff";
            } else if (tile.classList.contains("center-tile")) {
                tile.style.backgroundColor = isDarkMode ? "#555" : "#f39c12";
                tile.style.color = isDarkMode ? "#fff" : "#2c3e50";
            } else {
                tile.style.backgroundColor = isDarkMode ? "#333" : "#f39c12";
                tile.style.color = isDarkMode ? "#fff" : "#2c3e50";
            }
        });
    }

    // Gerar campos de input para os tiles
    function generateInputFields() {
        const rows = parseInt(document.getElementById('rows').value, 10);
        const cols = parseInt(document.getElementById('cols').value, 10);
        const isSquare = rows === cols;
        const numTiles = isSquare ? rows * cols - 1 : rows * cols;
        const tileInputs = document.getElementById('tileInputs');
        tileInputs.innerHTML = ""; // Limpar inputs anteriores

        for (let i = 0; i < numTiles; i++) {
            tileInputs.innerHTML += `
                <input type="text" id="tile-${i}" placeholder="Tile ${i + 1}">
            `;
        }
        document.getElementById('startGame').style.display = "inline-block";
    }

    function startGame() {
        const gameName = document.getElementById('gameName').value || "Bingo Game";
        document.title = gameName;
        document.querySelector('h1').textContent = gameName;

        const rows = parseInt(document.getElementById('rows').value, 10);
        const cols = parseInt(document.getElementById('cols').value, 10);
        const isSquare = rows === cols;
        const numTiles = rows * cols;
        const bingoContainer = document.getElementById('bingoContainer');
        const tileInputs = document.getElementById('tileInputs');
        bingoContainer.innerHTML = ""; // Limpar grid anterior
        bingoContainer.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
        bingoContainer.style.display = "grid";

        let inputIndex = 0;
        for (let i = 0; i < numTiles; i++) {
            const tile = document.createElement('div');

            // Central tile logic for square grids
            if (isSquare && numTiles % 2 === 1 && i === Math.floor(numTiles / 2)) {
                tile.classList.add('center-tile');
                tile.innerHTML = `<span onclick="handleNautibingoClick()">Nautibingo</span>`;
            } else {
                const tileContent = document.getElementById(`tile-${inputIndex}`)?.value || `Tile ${inputIndex + 1}`;
                tile.textContent = tileContent;
                tile.addEventListener('click', () => {
                    tile.classList.toggle('marked');
                    applyModeStyles(); // Atualizar estilo após marcar
                });
                inputIndex++;
            }

            bingoContainer.appendChild(tile);
        }
        tileInputs.style.display = "none";
        document.getElementById('startGame').style.display = "none";

        // Atualizar o estilo das tiles
        applyModeStyles();
    }

    function handleNautibingoClick() {
        const centerTile = document.querySelector('.center-tile');
        centerTile.classList.toggle('clicked');
        applyModeStyles(); // Atualizar estilo após clique
    }
</script>
