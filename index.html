<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cartela de Bingo!</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Special+Elite&family=Creepster&display=swap');
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            background-color: #0a0a0a;
            background-image: 
                url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23333' fill-opacity='0.3' fill-rule='evenodd'/%3E%3C/svg%3E");
            min-height: 100vh;
            color: #ccc;
            font-family: 'Special Elite', cursive;
            line-height: 1.4;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }
        
        .canvas-area {
            position: relative;
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #111;
            border: 3px solid #444;
            box-shadow: 0 0 15px #000;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            width: 100%;
            background: #1a1a1a;
            padding: 15px;
            border: 2px solid #444;
        }
        
        h1 {
            font-size: 4rem;
            color: #ff6b08;
            letter-spacing: 5px;
            text-transform: uppercase;
            margin-bottom: 10px;
            font-family: 'Creepster', cursive;
            text-shadow: 2px 2px 0 #000, 4px 4px 0 #ff6b08;
        }
        
        .title-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            background: #1a1a1a;
            padding: 10px;
            border: 2px solid #444;
        }
        
        .editable-title {
            background: #222;
            border: 2px dashed #666;
            padding: 10px 20px;
            font-size: 2rem;
            color: #ffcc00;
            text-align: center;
            width: 80%;
            max-width: 600px;
            font-family: 'Special Elite', cursive;
            outline: none;
            border-radius: 0;
        }
        
        .editable-title:focus {
            border-color: #ff6b08;
            box-shadow: 0 0 10px rgba(255, 107, 8, 0.5);
        }
        
        .shuffle-btn {
            background: #333;
            color: #ff6b08;
            border: 2px solid #ff6b08;
            padding: 10px 15px;
            font-size: 1.8rem;
            border-radius: 0;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Special Elite', cursive;
        }
        
        .shuffle-btn:hover {
            background: #ff6b08;
            color: #000;
        }
        
        .control-panel {
            background: #1a1a1a;
            padding: 25px;
            border: 2px solid #444;
            margin-bottom: 30px;
            position: relative;
        }
        
        .form-group {
            margin-bottom: 25px;
            background: #111;
            padding: 15px;
            border: 1px solid #444;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #ffcc00;
            font-size: 1.2rem;
            font-family: 'Special Elite', cursive;
        }
        
        /* Smooth slider with Halloween style */
        .slider-container {
            width: 100%;
            margin: 20px 0;
            position: relative;
            height: 22px;
            background: #000;
            border: 2px solid #444;
            cursor: pointer;
        }
        
        .slider-progress {
            height: 100%;
            background: linear-gradient(to bottom, #ff6b08, #cc0000);
            width: 50%;
            position: absolute;
            top: 0;
            left: 0;
            border-right: 2px solid #cc0000;
            transition: width 0.1s ease;
            pointer-events: none;
        }
        
        input[type="range"] {
            width: 100%;
            margin: 10px 0;
            -webkit-appearance: none;
            height: 22px;
            background: transparent;
            outline: none;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 2;
            cursor: pointer;
            opacity: 0;
        }
        
        .slider-value {
            text-align: center;
            font-size: 1.5rem;
            color: #ff6b08;
            margin-top: 5px;
            text-shadow: 1px 1px 0 #000;
            font-family: 'Special Elite', cursive;
        }
        
        textarea {
            width: 100%;
            height: 200px;
            padding: 12px;
            border: 2px solid #444;
            resize: vertical;
            font-size: 1rem;
            background: #111;
            color: #ffcc00;
            font-family: 'Special Elite', cursive;
            outline: none;
        }
        
        .button-container {
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }
        
        button {
            background: linear-gradient(to bottom, #ff6b08, #cc0000);
            color: #fff;
            border: 2px solid #ffcc00;
            padding: 12px 25px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Special Elite', cursive;
            text-shadow: 1px 1px 2px #000;
            margin: 0 10px;
        }
        
        button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 107, 8, 1);
        }
        
        .bingo-card-container {
            margin: 30px auto;
            width: 100%;
            max-width: 800px;
            background: #1a1a1a;
            border: 3px solid #ff6b08;
            padding: 20px;
            position: relative;
        }
        
        .bingo-card {
            display: grid;
            gap: 5px;
            margin: 0 auto;
            width: 100%;
        }
        
        .bingo-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: #222;
            color: #ffcc00;
            font-family: 'Special Elite', cursive;
            text-shadow: 1px 1px 0 #000;
            padding: 5px;
            border: 2px solid #444;
            position: relative;
            overflow: hidden;
        }
        
        .bingo-cell:hover {
            background: #2a2a2a;
            border-color: #ff6b08;
        }
        
        .bingo-cell.selected {
            background-color: #331100;
            color: #ff6b08;
            border-color: #ff0000;
            text-decoration: line-through;
        }
        
        .bingo-cell.nautinoia {
            background-color: #002233;
            color: #00ccff;
            border-color: #00ccff;
            text-shadow: 1px 1px 0 #000;
        }
        
        .url-share {
            margin-top: 20px;
            text-align: center;
            color: #ffcc00;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            background: #1a1a1a;
            padding: 15px;
            border: 2px solid #444;
        }
        
        .url-share input {
            flex: 1;
            padding: 10px;
            background: #111;
            border: 1px solid #444;
            color: #ffcc00;
            font-family: 'Special Elite', cursive;
            min-width: 200px;
        }
        
        .copy-btn {
            background: #333;
            color: #ffcc00;
            border: 1px solid #ff6b08;
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Special Elite', cursive;
        }
        
        .copy-btn:hover {
            background: #ff6b08;
            color: #000;
        }
        
        @media (max-width: 600px) {
            h1 {
                font-size: 2.8rem;
                letter-spacing: 3px;
            }
            
            .editable-title {
                font-size: 1.5rem;
                width: 90%;
            }
            
            .bingo-cell {
                font-size: 1rem;
                padding: 2px;
            }
            
            .title-container {
                flex-direction: column;
            }
            
            .url-share {
                flex-direction: column;
            }
        }
        
        .funny-element {
            position: absolute;
            font-size: 2rem;
            z-index: 5;
            opacity: 0.7;
            pointer-events: none;
            animation: float 6s infinite ease-in-out;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }
        
        .pumpkin {
            top: 10%;
            right: 5%;
            animation-delay: 0s;
        }
        
        .bat {
            top: 20%;
            left: 5%;
            animation-delay: 2s;
        }
        
        /* Loading animation for shuffle */
        @keyframes shuffleSpin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .shuffling {
            animation: shuffleSpin 0.5s linear infinite;
        }
        
        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 107, 8, 0.9);
            color: #000;
            padding: 10px 20px;
            font-family: 'Special Elite', cursive;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
            border: 2px solid #ffcc00;
        }
        
        .toast.show {
            opacity: 1;
        }
        
        .marquee {
            width: 100%;
            overflow: hidden;
            background: #ff6b08;
            color: #000;
            padding: 5px;
            font-family: 'Special Elite', cursive;
            margin-bottom: 20px;
            border: 2px solid #ffcc00;
        }
        
        .marquee span {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 15s linear infinite;
        }
        
        @keyframes marquee {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }
        
        /* Spider web elements */
        .web {
            position: absolute;
            width: 100px;
            height: 100px;
            background: 
                radial-gradient(circle, transparent 40%, #333 45%, transparent 50%),
                linear-gradient(45deg, transparent 45%, #333 50%, transparent 55%),
                linear-gradient(-45deg, transparent 45%, #333 50%, transparent 55%);
            opacity: 0.2;
            z-index: 1;
        }
        
        .web-1 {
            top: 10%;
            right: 10%;
        }
        
        .web-2 {
            bottom: 10%;
            left: 10%;
            transform: rotate(45deg);
        }
    </style>
</head>
<body>
    <div class="funny-element pumpkin">🎃</div>
    <div class="funny-element bat">🦇</div>
    <div class="web web-1"></div>
    <div class="web web-2"></div>
    <div class="toast" id="toast">URL copiada para a área de transferência!</div>
    
    <div class="marquee">
        <span>*** BEM-VINDO AO GERADOR DE CARTELAS DE BINGO DE HALLOWEEN! *** ASSUSTADORAMENTE DIVERTIDO ***</span>
    </div>
    
    <div class="canvas-area">
        <div class="header">
            <h1>
                <span>CARTELA DE BINGO!</span>
            </h1>
        </div>
        
        <div class="control-panel" id="control-panel">
            <div class="form-group">
                <label for="card-name-input">Nome da Cartela:</label>
                <input type="text" id="card-name-input" class="editable-title" value="Bingo da Meia-Noite" placeholder="Digite o nome da sua cartela">
            </div>
            
            <div class="form-group">
                <label for="rows">Linhas:</label>
                <div class="slider-container" id="rows-slider">
                    <div class="slider-progress" id="rows-progress" style="width: 50%;"></div>
                    <input type="range" id="rows" min="3" max="10" value="5" step="1">
                </div>
                <div class="slider-value" id="rows-value">5</div>
            </div>
            
            <div class="form-group">
                <label for="columns">Colunas:</label>
                <div class="slider-container" id="columns-slider">
                    <div class="slider-progress" id="columns-progress" style="width: 50%;"></div>
                    <input type="range" id="columns" min="3" max="10" value="5" step="1">
                </div>
                <div class="slider-value" id="columns-value">5</div>
            </div>
            
            <div class="form-group">
                <label for="contents">Itens do Bingo (um por linha):</label>
                <textarea id="contents">Cidade vazia
Noite chuvosa
Sombras alongadas
Poste quebrado
Pichação obscura
Vulto distante
Grito abafado
Luz oscilante
Porta rangendo
Vidro quebrado
Rato correndo
Cachorro uivando
Sirene distante
Pessoa suspeita
Carro abandonado
Lixo espalhado
Graffiti político
Poster rasgado
Escada incerta
Corredor escuro
Poeira acumulada
Teia de aranha
Cheiro estranho
Som inexplicável
Silêncio absoluto</textarea>
            </div>
            
            <div class="button-container">
                <button id="generate-btn">Gerar Cartela</button>
            </div>
        </div>
        
        <div class="bingo-card-container" id="card-container" style="display: none;">
            <div class="title-container">
                <input type="text" class="editable-title" id="card-title" value="Bingo da Meia-Noite" placeholder="Digite o título da sua cartela">
                <button class="shuffle-btn" id="shuffle-btn">🔀</button>
            </div>
            
            <div id="bingo-card" class="bingo-card"></div>
            
            <div class="url-share">
                <p>Compartilhe esta cartela:</p>
                <input type="text" id="share-url" readonly>
                <button class="copy-btn" id="copy-btn">Copiar URL</button>
            </div>
            
            <div class="button-container" style="margin-top: 20px;">
                <button id="new-card-btn">Criar Nova Cartela</button>
                <button id="print-btn">Imprimir Cartela</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get DOM elements
            const rowsSlider = document.getElementById('rows');
            const rowsValue = document.getElementById('rows-value');
            const rowsProgress = document.getElementById('rows-progress');
            const rowsSliderContainer = document.getElementById('rows-slider');
            const columnsSlider = document.getElementById('columns');
            const columnsValue = document.getElementById('columns-value');
            const columnsProgress = document.getElementById('columns-progress');
            const columnsSliderContainer = document.getElementById('columns-slider');
            const contentsTextarea = document.getElementById('contents');
            const generateBtn = document.getElementById('generate-btn');
            const newCardBtn = document.getElementById('new-card-btn');
            const printBtn = document.getElementById('print-btn');
            const shuffleBtn = document.getElementById('shuffle-btn');
            const copyBtn = document.getElementById('copy-btn');
            const bingoCardDiv = document.getElementById('bingo-card');
            const cardTitle = document.getElementById('card-title');
            const cardNameInput = document.getElementById('card-name-input');
            const shareUrl = document.getElementById('share-url');
            const toast = document.getElementById('toast');
            const controlPanel = document.getElementById('control-panel');
            const cardContainer = document.getElementById('card-container');
            
            // Current seed and card data
            let currentSeed = '';
            let currentCardData = null;
            
            // Update slider values display
            function updateSliderValue(slider, valueDisplay, progressBar) {
                const value = slider.value;
                valueDisplay.textContent = value;
                progressBar.style.width = `${(value - 3) / 7 * 100}%`;
            }
            
            rowsSlider.addEventListener('input', () => {
                updateSliderValue(rowsSlider, rowsValue, rowsProgress);
            });
            
            columnsSlider.addEventListener('input', () => {
                updateSliderValue(columnsSlider, columnsValue, columnsProgress);
            });
            
            // Click to set slider value
            rowsSliderContainer.addEventListener('click', (e) => {
                const rect = rowsSliderContainer.getBoundingClientRect();
                const percent = (e.clientX - rect.left) / rect.width;
                const min = parseInt(rowsSlider.min);
                const max = parseInt(rowsSlider.max);
                const value = Math.round(min + percent * (max - min));
                rowsSlider.value = value;
                updateSliderValue(rowsSlider, rowsValue, rowsProgress);
            });
            
            columnsSliderContainer.addEventListener('click', (e) => {
                const rect = columnsSliderContainer.getBoundingClientRect();
                const percent = (e.clientX - rect.left) / rect.width;
                const min = parseInt(columnsSlider.min);
                const max = parseInt(columnsSlider.max);
                const value = Math.round(min + percent * (max - min));
                columnsSlider.value = value;
                updateSliderValue(columnsSlider, columnsValue, columnsProgress);
            });
            
            // Set initial values
            updateSliderValue(rowsSlider, rowsValue, rowsProgress);
            updateSliderValue(columnsSlider, columnsValue, columnsProgress);
            
            // Check if URL has seed parameters
            if (window.location.search) {
                loadFromSeed();
            }
            
            // Generate bingo card
            generateBtn.addEventListener('click', generateBingoCard);
            
            // Create new card
            newCardBtn.addEventListener('click', () => {
                cardContainer.style.display = 'none';
                controlPanel.style.display = 'block';
                window.history.pushState({}, '', window.location.pathname);
            });
            
            // Print card
            printBtn.addEventListener('click', () => {
                window.print();
            });
            
            // Shuffle button
            shuffleBtn.addEventListener('click', shuffleCard);
            
            // Copy URL button
            copyBtn.addEventListener('click', copyUrlToClipboard);
            
            // Sync card name input with title
            cardNameInput.addEventListener('input', function() {
                cardTitle.value = this.value;
                const length = this.value.length;
                if (length > 30) {
                    this.style.fontSize = '1.5rem';
                    cardTitle.style.fontSize = '1.5rem';
                } else if (length > 20) {
                    this.style.fontSize = '1.8rem';
                    cardTitle.style.fontSize = '1.8rem';
                } else {
                    this.style.fontSize = '2rem';
                    cardTitle.style.fontSize = '2rem';
                }
            });
            
            function generateBingoCard() {
                const rows = parseInt(rowsSlider.value);
                const columns = parseInt(columnsSlider.value);
                const contents = contentsTextarea.value.split('\n').filter(item => item.trim() !== '');
                const cardName = cardNameInput.value;
                
                // Validate inputs
                if (contents.length < rows * columns) {
                    alert(`Você precisa de pelo menos ${rows * columns} itens para uma cartela de bingo ${rows}x${columns}. Atualmente você tem ${contents.length} itens.`);
                    return;
                }
                
                // Create a seed based on the current inputs
                currentSeed = createSeed(rows, columns, contents, cardName);
                
                // Update URL with the seed
                const newUrl = `${window.location.origin}${window.location.pathname}?seed=${currentSeed}`;
                window.history.pushState({}, '', newUrl);
                
                // Update share URL
                shareUrl.value = newUrl;
                
                // Store current card data
                currentCardData = {
                    rows: rows,
                    columns: columns,
                    contents: contents,
                    cardName: cardName
                };
                
                // Generate the card
                renderBingoCard(rows, columns, contents, currentSeed);
                
                // Show the card, hide the control panel
                controlPanel.style.display = 'none';
                cardContainer.style.display = 'block';
            }
            
            function shuffleCard() {
                if (!currentCardData) return;
                
                // Add shuffle animation
                shuffleBtn.classList.add('shuffling');
                
                // Create new seed with timestamp to force reshuffle
                const newSeed = createSeed(
                    currentCardData.rows, 
                    currentCardData.columns, 
                    currentCardData.contents,
                    currentCardData.cardName
                );
                
                // Update URL with the new seed
                const newUrl = `${window.location.origin}${window.location.pathname}?seed=${newSeed}`;
                window.history.pushState({}, '', newUrl);
                
                // Update share URL
                shareUrl.value = newUrl;
                
                // Regenerate the card with new seed
                setTimeout(() => {
                    renderBingoCard(
                        currentCardData.rows, 
                        currentCardData.columns, 
                        currentCardData.contents, 
                        newSeed
                    );
                    
                    // Remove shuffle animation
                    shuffleBtn.classList.remove('shuffling');
                }, 500);
            }
            
            function createSeed(rows, columns, contents, cardName) {
                // Create a seed based on the inputs
                const seedData = {
                    r: rows,
                    c: columns,
                    i: contents,
                    n: cardName,
                    t: Date.now() // Add timestamp to make each seed unique
                };
                return btoa(JSON.stringify(seedData)).replace(/=/g, '');
            }
            
            function parseSeed(seed) {
                try {
                    // Add padding if needed
                    while (seed.length % 4 !== 0) {
                        seed += '=';
                    }
                    
                    const decoded = atob(seed);
                    return JSON.parse(decoded);
                } catch (e) {
                    console.error("Error parsing seed:", e);
                    return null;
                }
            }
            
            function loadFromSeed() {
                const urlParams = new URLSearchParams(window.location.search);
                const seed = urlParams.get('seed');
                
                if (seed) {
                    const params = parseSeed(seed);
                    
                    if (params) {
                        // Update form values
                        rowsSlider.value = params.r;
                        updateSliderValue(rowsSlider, rowsValue, rowsProgress);
                        columnsSlider.value = params.c;
                        updateSliderValue(columnsSlider, columnsValue, columnsProgress);
                        contentsTextarea.value = params.i.join('\n');
                        cardNameInput.value = params.n || "Bingo da Meia-Noite";
                        cardTitle.value = params.n || "Bingo da Meia-Noite";
                        
                        // Store current seed and card data
                        currentSeed = seed;
                        currentCardData = {
                            rows: params.r,
                            columns: params.c,
                            contents: params.i,
                            cardName: params.n || "Bingo da Meia-Noite"
                        };
                        
                        // Update share URL
                        shareUrl.value = window.location.href;
                        
                        // Generate the card
                        renderBingoCard(params.r, params.c, params.i, seed);
                        
                        // Show the card, hide the control panel
                        controlPanel.style.display = 'none';
                        cardContainer.style.display = 'block';
                    }
                }
            }
            
            function renderBingoCard(rows, columns, contents, seed) {
                // Clear previous card
                bingoCardDiv.innerHTML = '';
                
                // Set grid layout
                bingoCardDiv.style.gridTemplateColumns = `repeat(${columns}, 1fr)`;
                bingoCardDiv.style.gridTemplateRows = `repeat(${rows}, 1fr)`;
                
                // Shuffle contents using the seed for consistency
                const shuffledContents = shuffleArray([...contents], seed);
                
                // Create cells
                for (let i = 0; i < rows * columns; i++) {
                    const cell = document.createElement('div');
                    cell.className = 'bingo-cell';
                    
                    // Check if this is the center cell (nautinoia space)
                    if (i === Math.floor(rows * columns / 2) && 
                        rows % 2 === 1 && columns % 2 === 1) {
                        cell.textContent = 'NAUTINOIA';
                        cell.classList.add('nautinoia');
                    } else {
                        cell.textContent = shuffledContents[i % shuffledContents.length];
                    }
                    
                    // Add click event to toggle selection
                    cell.addEventListener('click', function() {
                        this.classList.toggle('selected');
                    });
                    
                    bingoCardDiv.appendChild(cell);
                }
            }
            
            function shuffleArray(array, seed) {
                // Use the seed to create a consistent shuffle
                let currentIndex = array.length;
                let randomIndex;
                
                // Use the seed to generate a predictable "random" sequence
                const seedNum = seed.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);
                
                // While there remain elements to shuffle...
                while (currentIndex !== 0) {
                    // Pick a remaining element...
                    randomIndex = Math.floor(pseudoRandom(seedNum, currentIndex) * currentIndex);
                    currentIndex--;
                    
                    // And swap it with the current element.
                    [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
                }
                
                return array;
            }
            
            function pseudoRandom(seed, n) {
                // Simple pseudo-random number generator
                const x = Math.sin(seed + n) * 10000;
                return x - Math.floor(x);
            }
            
            function copyUrlToClipboard() {
                shareUrl.select();
                shareUrl.setSelectionRange(0, 99999); // For mobile devices
                
                navigator.clipboard.writeText(shareUrl.value).then(() => {
                    // Show toast notification
                    toast.classList.add('show');
                    setTimeout(() => {
                        toast.classList.remove('show');
                    }, 2000);
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                });
            }
        });
    </script>
</body>
</html>
